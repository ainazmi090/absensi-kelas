<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Absensi Kelas</title>
<style>
body{
  font-family:Arial;
  background:#f4f4f4;
  text-align:center;
}
table{
  margin:20px auto;
  border-collapse:collapse;
  width:95%;
}
th, td{
  border:1px solid #ccc;
  padding:6px;
  font-size:14px;
}
th{
  background:#333;
  color:white;
}
button{
  padding:4px 8px;
  margin:2px;
  font-size:12px;
}
.reset{
  background:red;
  color:white;
  padding:8px 15px;
  margin:10px;
}
</style>
</head>
<body>

<h2>Web Absensi Kelas (36 Siswa)</h2>
<button class="reset" onclick="resetData()">Reset Semua Data</button>

<table>
<thead>
<tr>
<th>No</th>
<th>Nama</th>
<th>Hadir</th>
<th>Izin</th>
<th>Sakit</th>
<th>Absen</th>
<th>Aksi</th>
</tr>
</thead>
<tbody id="absenTable"></tbody>
</table>

<script>

let siswa = [];

function initData(){
  let saved = localStorage.getItem("absensiData");

  if(saved){
    siswa = JSON.parse(saved);
  } else {
    for(let i=1;i<=36;i++){
      siswa.push({
        no:i,
        nama:"Siswa "+i,
        hadir:0,
        izin:0,
        sakit:0,
        absen:0
      });
    }
    saveData();
  }
}

function saveData(){
  localStorage.setItem("absensiData", JSON.stringify(siswa));
}

function renderTable(){
  let table = document.getElementById("absenTable");
  table.innerHTML="";

  siswa.forEach((s,index)=>{
    table.innerHTML += `
      <tr>
        <td>${s.no}</td>
        <td contenteditable="true" 
            onblur="editNama(${index}, this.innerText)">
            ${s.nama}
        </td>
        <td>${s.hadir}</td>
        <td>${s.izin}</td>
        <td>${s.sakit}</td>
        <td>${s.absen}</td>
        <td>
          <button onclick="tambah(${index},'hadir')">Hadir</button>
          <button onclick="tambah(${index},'izin')">Izin</button>
          <button onclick="tambah(${index},'sakit')">Sakit</button>
          <button onclick="tambah(${index},'absen')">Absen</button>
        </td>
      </tr>
    `;
  });
}

function tambah(index,jenis){
  siswa[index][jenis]++;
  saveData();
  renderTable();
}

function editNama(index,namaBaru){
  siswa[index].nama = namaBaru;
  saveData();
}

function resetData(){
  if(confirm("Yakin reset semua data?")){
    localStorage.removeItem("absensiData");
    siswa=[];
    initData();
    renderTable();
  }
}

initData();
renderTable();

</script>

</body>
  </html>
